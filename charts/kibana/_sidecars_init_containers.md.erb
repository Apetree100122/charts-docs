<%
=begin
apps: kibana
platforms: kubernetes
id: sidecars_init_containers
title: Sidecars and Init Containers
category: administration
weight: 70
=end %>

If you have a need for additional containers to run within the same pod as Kibana (e.g. an additional metrics or logging exporter), you can do so via the sidecars config parameter. Simply define your container according to the Kubernetes container spec.

~~~
sidecars:
- name: your-image-name
  image: your-image
  imagePullPolicy: Always
  ports:
  - name: portname
   containerPort: 1234
~~~

Similarly, you can add extra init containers using the initContainers parameter.

~~~
initContainers:
- name: your-image-name
  image: your-image
  imagePullPolicy: Always
  ports:
  - name: portname
   containerPort: 1234
~~~

### Add a sample Elasticsearch container as sidecar

This chart requires an Elasticsearch instance to work. For production, you can use an already existing Elasticsearch instance or deploy the Elasticsearch chart with the global.kibanaEnabled=true parameter.

For the purpose of testing, you can use a sidecar Elasticsearch container setting the following parameters during the Kibana chart installation:

~~~
elasticsearch.hosts[0]=localhost
elasticsearch.port=9200
sidecars[0].name=elasticsearch
sidecars[0].image=bitnami/elasticsearch:latest
sidecars[0].imagePullPolicy=IfNotPresent
sidecars[0].ports[0].name=http
sidecars[0].ports[0].containerPort=9200
~~~
