<%
=begin
apps: kafka
platforms: kubernetes
id: rolling_immutable_tags
title: Rolling versus immutable tags
category: configuration
weight: 20
highlight: 20
=end %>

<%= partial 'platforms/kubernetes/immutable_tags_intro.md.erb' %>

### Production configuration and horizontal scaling

This chart includes a *values-production.yaml* file where you can find some parameters oriented to production configuration in comparison to the regular *values.yaml*. You can use this file instead of the default one.

* Number of Kafka nodes:

    - replicaCount: 1
    + replicaCount: 3
* Allow to use the PLAINTEXT listener:

    - allowPlaintextListener: true
    + allowPlaintextListener: false

* Default replication factors for automatically created topics:

    - defaultReplicationFactor: 1
    + defaultReplicationFactor: 3

* The replication factor for the offsets topic:

    - offsetsTopicReplicationFactor: 1
    + offsetsTopicReplicationFactor: 3

* The replication factor for the transaction topic:

    - transactionStateLogReplicationFactor: 1
    + transactionStateLogReplicationFactor: 3

* Overridden min.insync.replicas config for the transaction topic:

    - transactionStateLogMinIsr: 1
    + transactionStateLogMinIsr: 3

* Switch to enable the Kafka authentication:

    - auth.enabled: false
    + auth.enabled: true

* Whether or not to create a separate Kafka exporter:

    - metrics.kafka.enabled: false
    + metrics.kafka.enabled: true

* Whether or not to expose JMX metrics to Prometheus:

    - metrics.jmx.enabled: false
    + metrics.jmx.enabled: true

* Zookeeper chart metrics configuration:

    + zookeeper.metrics.enabled: true

To horizontally scale this chart once it has been deployed, you can upgrade the deployment using a new value for the replicaCount parameter.

### Use custom configuration

Any environment variable beginning with KAFKA_CFG_ will be mapped to its corresponding Kafka key. For example, use KAFKA_CFG_BACKGROUND_THREADS in order to set background.threads. In order to pass custom environment variables use the extraEnvVars property.
