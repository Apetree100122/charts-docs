<%
=begin
apps: etcd
platforms: kubernetes
id: scale_down
title: Scale down the cluster
category: administration
weight: 40
highlight: 40
=end %>

To scale down the etcd cluster, you have two alternatives:

- Scale the statefulset using the *kubectl scale* command. For instance, to remove a etcd member:

  ~~~
  $ CURRENT_REPLICAS=$(kubectl get statefulset/my-release-etcd -o=jsonpath='{.status.replicas}')
  $ kubectl scale --replicas=$((CURRENT_REPLICAS-1)) statefulset/my-release-etcd
  ~~~

- Upgrade your installation by providing the total number of etcd members you want in the etcd cluster to the *helm upgrade* command. For instance, to remove 2 members:

  ~~~
  $ CURRENT_REPLICAS=$(kubectl get statefulset/my-release-etcd -o=jsonpath='{.status.replicas}')
  $ helm upgrade my-release bitnami/etcd \
    --set auth.rbac.rootPassword=ETCD_ROOT_PASSWORD \
    --set replicaCount=$((CURRENT_REPLICAS-2))
  ~~~

  > NOTE: You need to substitute the placeholder ETCD_ROOT_PASSWORD with the value obtained from instructions in the installation notes.
